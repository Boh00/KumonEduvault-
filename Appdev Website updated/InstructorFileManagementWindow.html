<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Student — File Management (Window)</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg: #10ceeb;           /* mock sky blue */
    --panel: #ffffff;
    --muted: rgba(0,0,0,0.55);
    --accent: #111827;
    --accent-2: #0b74d1;
    --card-shadow: 0 16px 40px rgba(4,25,35,0.08);
    --radius:12px;
    --maxw:1200px;
    --gap:28px;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--accent);-webkit-font-smoothing:antialiased}
  a{color:inherit;text-decoration:none}
  button, input, textarea, select { font-family: inherit; }

  /* Top navigation */
  .top {
    max-width:var(--maxw);margin:12px auto;padding:12px 20px;display:flex;align-items:center;justify-content:space-between;
  }
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:36px;height:36px;border-radius:8px;background:#fff;color:var(--accent-2);display:flex;align-items:center;justify-content:center;font-weight:800;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
  nav a{margin-left:14px;color:rgba(0,0,0,0.6);font-weight:600}
  nav a.active{background:#fff;padding:8px 10px;border-radius:8px;box-shadow:var(--card-shadow)}

  /* hero */
  .hero{max-width:var(--maxw);margin:6px auto 24px;padding:18px 20px;display:flex;align-items:flex-start;gap:18px}
  .hero-left{flex:1}
  .hero-right{flex:1;max-width:480px}
  h1{margin:0;font-size:48px;line-height:1;font-weight:800}
  .sub{color:rgba(0,0,0,0.45);margin-top:8px;font-weight:500}

  /* main window layout */
  .window{max-width:var(--maxw);margin:0 auto;padding:0 20px 60px;display:grid;grid-template-columns:1fr 480px;gap:var(--gap);align-items:start}
  @media (max-width:980px){ .window{grid-template-columns:1fr; padding:0 14px} .hero-right{order:3} }

  /* preview card (left) */
  .preview {
    background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.92));
    padding:18px;border-radius:14px;border:1px solid rgba(0,0,0,0.06);box-shadow:var(--card-shadow);
    display:flex;gap:18px;align-items:flex-start;min-height:320px;
  }
  .thumb {
    flex: 0 0 520px; max-width:520px; height:320px;
    border-radius:8px;background:#efefef;border:1px solid rgba(0,0,0,0.04);
    display:flex;align-items:center;justify-content:center;color:var(--muted);font-weight:700;font-size:20px;position:relative;overflow:hidden;
  }
  @media (max-width:1300px){ .thumb{flex:0 0 420px;max-width:420px} }
  @media (max-width:980px){ .thumb{width:100%;height:260px;max-width:100%} }

  .thumb img{max-width:100%;max-height:100%;display:block}
  .star {
    position:absolute;left:10px;top:10px;width:44px;height:44px;border-radius:10px;background:#fff;border:1px solid rgba(0,0,0,0.06);
    display:flex;align-items:center;justify-content:center;font-size:18px;cursor:pointer;box-shadow:0 6px 16px rgba(0,0,0,0.06)
  }
  .star.active{background:linear-gradient(90deg,#ffd36a,#ffc857);color:#3b2e00}

  .preview-meta { flex:1; display:flex;flex-direction:column;gap:10px;min-width:0 }
  .meta-title{font-weight:800;font-size:20px}
  .meta-sub{color:var(--muted);font-size:14px}
  .meta-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
  .pill{background:#fff;padding:8px 12px;border-radius:10px;border:1px solid rgba(0,0,0,0.04);font-weight:700}

  .preview-actions{display:flex;gap:10px;margin-top:14px;flex-wrap:wrap}
  .btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
  .btn.ghost{background:#fff;color:var(--accent);border:1px solid rgba(0,0,0,0.06)}
  .btn.secondary{background:#fff;border:1px solid rgba(0,0,0,0.06);color:var(--accent)}

  /* right details panel */
  .details {
    background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.95));
    padding:18px;border-radius:14px;border:1px solid rgba(0,0,0,0.06);box-shadow:var(--card-shadow);
    position:sticky;top:20px;height:fit-content;
  }
  .details h3{margin:0 0 6px;font-size:20px}
  .label{font-size:13px;color:var(--muted);margin-top:12px;margin-bottom:6px}
  input[type="text"], select, textarea { width:100%;padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);font-size:14px; }
  textarea { min-height:100px; resize: vertical; }

  .controls-row{display:flex;gap:10px;margin-top:12px}
  .controls-row .col{flex:1}
  .small-note{background:#fff;padding:12px;border-radius:10px;border:1px solid rgba(0,0,0,0.04);margin-top:12px;color:var(--muted)}

  /* Upload input hidden but accessible */
  .file-input{display:none}

  /* modal preview (center) */
  .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;z-index:120}
  .modal { width:min(900px,96%); background:#fff;padding:18px;border-radius:12px;box-shadow:0 30px 60px rgba(0,0,0,0.35) }
  .modal img{max-width:100%}
  .modal pre{background:#f7f7f8;padding:12px;border-radius:8px;overflow:auto}

  /* footer info */
  .hint{max-width:var(--maxw);margin:18px auto 40px;padding:0 20px;color:var(--muted);font-size:13px}

  /* responsive adjustments */
  @media (max-width:700px){
    h1{font-size:32px}
    .preview { padding:12px; flex-direction:column; }
    .preview-meta{order:3}
    .thumb{order:1;height:220px}
    .details{position:static;margin-top:14px}
  }
</style>
</head>
<body>
  <header class="top" role="banner">
    <div class="brand">
      <div class="logo" aria-hidden="true">K</div>
      <div>
        <div style="font-weight:800">KumonEduvault</div>
        <div style="color:rgba(0,0,0,0.6);font-size:13px">Instructor File Management</div>
      </div>
    </div>

    <nav aria-label="Main">
      <a href="InstructorHomePage.html" id="navHome">Home</a>
      <a href="InstructorFileManagement.html" id="navFiles" class="active">Files</a>
      <a href="ActivityLogPage(Instructor).html" id="navActivity">Activity</a>
      <a href="InstructorSettingsPage.html" id="navSettings">Settings</a>
    </nav>
  </header>

  <section class="hero">
    <div class="hero-left">
      <h1>Welcome, User!</h1>
      <div class="sub">Manage your assignments, view previews, and keep your files organized.</div>
    </div>
    <div class="hero-right">
      <div style="background:rgba(255,255,255,0.95);padding:12px;border-radius:12px;box-shadow:var(--card-shadow);text-align:center">
        <div style="font-weight:800;font-size:20px">Assignments</div>
        <div class="sub" style="color:rgba(0,0,0,0.5);font-weight:600;margin-top:6px">2 pending • 1 due soon</div>
      </div>
    </div>
  </section>

  <main class="window" role="main">

    <!-- LEFT: Preview + list -->
    <section class="preview" aria-labelledby="previewTitle">
      <div class="thumb" id="thumb">
        <button class="star" id="starBtn" aria-pressed="false" title="Favorite file">☆</button>
        <div id="thumbInner">No file selected</div>
      </div>

      <div class="preview-meta">
        <div>
          <div class="meta-title" id="fileName">Select a file</div>
          <div class="meta-sub" id="fileMeta">No file selected</div>
        </div>

        <div class="meta-row" aria-hidden="false">
          <div class="pill" id="typePill">—</div>
          <div class="pill" id="tagPill">—</div>
          <div class="pill" id="datePill">—</div>
        </div>

        <div class="preview-actions" role="group" aria-label="File actions">
          <label class="btn ghost" for="uploadInput" title="Upload new file (Ctrl/Cmd+U)">Upload</label>
          <input id="uploadInput" class="file-input" type="file" accept="*/*" />
          <button class="btn" id="downloadBtn" disabled>Download</button>
          <button class="btn secondary" id="openBtn" disabled>Open</button>
          <button class="btn secondary" id="shareBtn" disabled>Share</button>
        </div>

        <div style="margin-top:12px">
          <div class="meta-sub" style="font-weight:700">Quick files</div>
          <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap" id="quickList">
            <!-- quick file buttons inserted here -->
          </div>
        </div>
      </div>
    </section>

    <!-- RIGHT: Details -->
    <aside class="details" aria-labelledby="detailsHeading">
      <h3 id="detailsHeading">Assignment #</h3>
      <div class="label">Instructor</div>
      <div class="meta-sub" id="instructor">Instructor</div>

      <div class="label">File type</div>
      <select id="fileType" disabled>
        <option>PDF</option>
        <option>DOCX</option>
        <option>Image</option>
        <option>Other</option>
      </select>

      <div class="label">File tag</div>
      <input id="fileTag" type="text" placeholder="Add a tag" disabled>

      <div class="controls-row">
        <div class="col">
          <button class="btn" id="editBtn">Edit</button>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <button class="btn ghost" id="saveBtn" disabled>Save</button>
          <button class="btn ghost" id="deleteBtn" disabled>Delete</button>
        </div>
      </div>

      <div class="label" style="margin-top:12px">Comments</div>
      <textarea id="comments" placeholder="Add notes..." disabled></textarea>

      <div class="small-note">
        Tip: Click a file card to select it. Use <strong>Ctrl/Cmd+U</strong> to upload quickly.
      </div>
    </aside>
  </main>

  <div class="hint">This demo stores files in your browser (localStorage). Uploaded files will be available during the session. No server required.</div>

  <!-- Preview Modal -->
  <div class="modal-backdrop" id="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong id="modalTitle">Preview</strong>
        <button id="closeModal" class="btn ghost" aria-label="Close preview">Close</button>
      </div>
      <div id="modalContent" style="margin-top:12px"></div>
    </div>
  </div>

<script>
/* Student File Management Window
   - Single-file demo: Upload, preview image (blob), store metadata in localStorage
   - Edit details (type/tag/comments), favorite, download, share (copy link)
*/

const STORAGE_KEY = 'student_files_window_v1';

// DOM refs
const thumbInner = document.getElementById('thumbInner');
const starBtn = document.getElementById('starBtn');
const fileNameEl = document.getElementById('fileName');
const fileMetaEl = document.getElementById('fileMeta');
const typePill = document.getElementById('typePill');
const tagPill = document.getElementById('tagPill');
const datePill = document.getElementById('datePill');
const uploadInput = document.getElementById('uploadInput');
const downloadBtn = document.getElementById('downloadBtn');
const openBtn = document.getElementById('openBtn');
const shareBtn = document.getElementById('shareBtn');
const quickList = document.getElementById('quickList');

const fileType = document.getElementById('fileType');
const fileTag = document.getElementById('fileTag');
const editBtn = document.getElementById('editBtn');
const saveBtn = document.getElementById('saveBtn');
const deleteBtn = document.getElementById('deleteBtn');
const commentsEl = document.getElementById('comments');

const modal = document.getElementById('modal');
const modalContent = document.getElementById('modalContent');
const closeModalBtn = document.getElementById('closeModal');

let files = load() || sampleFiles();
let selectedId = files.length ? files[0].id : null;

// initial render
renderQuickList();
selectFile(selectedId);

/* Utilities */
function uid(){ return 'f' + Math.random().toString(36).slice(2,9); }
function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(files)); }
function load(){ try { return JSON.parse(localStorage.getItem(STORAGE_KEY)); } catch(e){ return null; } }
function fmtDate(ts){ const d = new Date(ts); return d.toLocaleDateString() + ' ' + d.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'}); }
function detectType(name){
  const ext = name.split('.').pop().toLowerCase();
  if(['png','jpg','jpeg','gif','svg'].includes(ext)) return 'Image';
  if(ext === 'pdf') return 'PDF';
  if(['doc','docx'].includes(ext)) return 'DOCX';
  return 'Other';
}

/* Rendering functions */
function renderQuickList(){
  quickList.innerHTML = '';
  files.slice(0,6).forEach(f => {
    const btn = document.createElement('button');
    btn.className = 'btn secondary';
    btn.style.padding = '8px 10px';
    btn.textContent = f.name.length > 20 ? f.name.slice(0,18) + '…' : f.name;
    btn.title = f.name;
    btn.onclick = () => selectFile(f.id);
    quickList.appendChild(btn);
  });
}

function selectFile(id){
  if(!id){
    // clear UI
    thumbInner.textContent = 'No file selected';
    fileNameEl.textContent = 'Select a file';
    fileMetaEl.textContent = 'No file selected';
    typePill.textContent = '—';
    tagPill.textContent = '—';
    datePill.textContent = '—';
    downloadBtn.disabled = true;
    openBtn.disabled = true;
    shareBtn.disabled = true;
    saveBtn.disabled = true;
    deleteBtn.disabled = true;
    commentsEl.value = '';
    starBtn.classList.remove('active'); starBtn.textContent = '☆'; starBtn.setAttribute('aria-pressed','false');
    selectedId = null;
    return;
  }

  const f = files.find(x => x.id === id);
  if(!f) return;
  selectedId = id;

  // thumb
  thumbInner.innerHTML = '';
  if(f.blobUrl && f.type === 'Image'){
    const img = document.createElement('img');
    img.src = f.blobUrl;
    img.alt = f.name;
    thumbInner.appendChild(img);
  } else {
    thumbInner.textContent = f.type || 'FILE';
  }

  // metadata
  fileNameEl.textContent = f.name;
  fileMetaEl.textContent = `${f.type} • ${f.size}`;
  typePill.textContent = f.type || '—';
  tagPill.textContent = f.tag || '—';
  datePill.textContent = f.date ? new Date(f.date).toLocaleDateString() : '—';

  // details panel
  fileType.value = f.type || 'Other';
  fileTag.value = f.tag || '';
  commentsEl.value = f.comments || '';

  // actions enabled
  downloadBtn.disabled = false;
  openBtn.disabled = false;
  shareBtn.disabled = false;
  deleteBtn.disabled = false;
  saveBtn.disabled = true;
  editBtn.disabled = false;

  // favorite
  starBtn.classList.toggle('active', !!f.favorite);
  starBtn.textContent = f.favorite ? '★' : '☆';
  starBtn.setAttribute('aria-pressed', f.favorite ? 'true' : 'false');

  // highlight selected quick list visually (re-render)
  renderQuickList();
}

/* Upload / create */
uploadInput.addEventListener('change', async (e) => {
  const file = e.target.files && e.target.files[0];
  if(!file) return;
  const blobUrl = URL.createObjectURL(file);
  const newFile = {
    id: uid(),
    name: file.name,
    size: Math.round(file.size/1024) + ' KB',
    date: Date.now(),
    type: detectType(file.name),
    tag: '',
    comments: '',
    favorite: false,
    blobUrl
  };
  files.unshift(newFile);
  save();
  renderQuickList();
  selectFile(newFile.id);
  e.target.value = '';
});

/* Download */
downloadBtn.addEventListener('click', () => {
  if(!selectedId) return;
  const f = files.find(x => x.id === selectedId);
  if(!f) return;
  if(f.blobUrl){
    const a = document.createElement('a');
    a.href = f.blobUrl;
    a.download = f.name;
    a.click();
  } else {
    // fallback small text file
    const b = new Blob([`Demo file: ${f.name}`], {type:'text/plain'});
    const url = URL.createObjectURL(b);
    const a = document.createElement('a');
    a.href = url; a.download = f.name; a.click(); URL.revokeObjectURL(url);
  }
});

/* Open preview modal */
openBtn.addEventListener('click', () => {
  if(!selectedId) return;
  const f = files.find(x => x.id === selectedId);
  if(!f) return;
  modalContentRender(f);
  modal.style.display = 'flex';
  modal.setAttribute('aria-hidden','false');
});
closeModalBtn.addEventListener('click', () => { modal.style.display = 'none'; modal.setAttribute('aria-hidden','true'); });

function modalContentRender(f){
  modalContent.innerHTML = '';
  const title = document.createElement('div'); title.style.fontWeight='800'; title.textContent = f.name;
  const info = document.createElement('div'); info.style.color = 'var(--muted)'; info.style.marginTop='6px'; info.textContent = `${f.type} • ${f.size} • ${new Date(f.date).toLocaleString()}`;
  modalContent.appendChild(title); modalContent.appendChild(info);
  if(f.blobUrl && f.type === 'Image'){
    const img = document.createElement('img'); img.src = f.blobUrl; img.alt = f.name; img.style.marginTop='12px';
    modalContent.appendChild(img);
  } else {
    const pre = document.createElement('pre'); pre.style.marginTop='12px'; pre.textContent = `Preview not available for this file in demo mode.\n\nFilename: ${f.name}\nType: ${f.type}\nComments: ${f.comments || '-'}`;
    modalContent.appendChild(pre);
  }
}

/* Share */
shareBtn.addEventListener('click', () => {
  if(!selectedId) return;
  const f = files.find(x => x.id === selectedId);
  if(!f) return;
  const shareUrl = f.blobUrl || `https://example.com/files/${f.id}`;
  // try Web Share if available
  if(navigator.share){
    navigator.share({ title: f.name, url: shareUrl }).catch(()=>{ prompt('Share link (copy):', shareUrl); });
  } else {
    prompt('Copy share link:', shareUrl);
  }
});

/* Favorite toggle */
starBtn.addEventListener('click', () => {
  if(!selectedId) return;
  const f = files.find(x => x.id === selectedId);
  if(!f) return;
  f.favorite = !f.favorite;
  save();
  starBtn.classList.toggle('active', f.favorite);
  starBtn.textContent = f.favorite ? '★' : '☆';
});

/* Edit / Save / Delete */
editBtn.addEventListener('click', () => {
  if(!selectedId) return;
  fileType.disabled = false; fileTag.disabled = false; commentsEl.disabled = false;
  saveBtn.disabled = false; editBtn.disabled = true;
  fileType.focus();
});
saveBtn.addEventListener('click', () => {
  if(!selectedId) return;
  const f = files.find(x => x.id === selectedId);
  if(!f) return;
  f.type = fileType.value;
  f.tag = fileTag.value.trim();
  f.comments = commentsEl.value.trim();
  save();
  fileType.disabled = true; fileTag.disabled = true; commentsEl.disabled = true;
  saveBtn.disabled = true; editBtn.disabled = false;
  // update UI quickly
  typePill.textContent = f.type || '—';
  tagPill.textContent = f.tag || '—';
  fileMetaEl.textContent = `${f.type} • ${f.size}`;
  renderQuickList();
});
deleteBtn.addEventListener('click', () => {
  if(!selectedId) return;
  if(!confirm('Delete this file? This action cannot be undone in the demo.')) return;
  files = files.filter(x => x.id !== selectedId);
  save();
  renderQuickList();
  selectFile(files.length ? files[0].id : null);
});

/* Keyboard shortcuts */
document.addEventListener('keydown', (e) => {
  if((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'u'){ e.preventDefault(); uploadInput.click(); }
  if(e.key === 'Enter' && document.activeElement && ['INPUT','TEXTAREA','SELECT'].includes(document.activeElement.tagName) && document.activeElement.closest('.details')) {
    // press Enter in a details field toggles save if editing
    if(!saveBtn.disabled){ saveBtn.click(); }
  }
});

/* Helpers: sample data */
function sampleFiles(){
  const now = Date.now();
  const arr = [
    { id: uid(), name: 'Reading Worksheet.pdf', size:'200 KB', date: now - 1000*60*60*24*2, type:'PDF', tag:'Kumon Level', comments:'Read the passage and answer questions.', favorite:true },
    { id: uid(), name: 'Mathematics Practice.pdf', size:'185 KB', date: now - 1000*60*60*24*5, type:'PDF', tag:'Mathematics', comments:'Practice problems on fractions.', favorite:false },
    { id: uid(), name: 'Achievement Test.pdf', size:'345 KB', date: now - 1000*60*60*24*10, type:'PDF', tag:'Test', comments:'Complete under exam conditions.', favorite:false },
    { id: uid(), name: 'Diagram.png', size:'92 KB', date: now - 1000*60*60*24*1, type:'Image', tag:'Science', comments:'Label the parts.', favorite:false, blobUrl: null }
  ];
  // Pre-generate a simple image for the Diagram (a tiny SVG data URL) so preview works:
  const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='600' height='400'><rect width='100%' height='100%' fill='#efefef'/><circle cx='300' cy='200' r='80' fill='#cfe8f6'/><text x='50%' y='55%' font-size='28' text-anchor='middle' fill='#6b7280' font-family='Inter'>Diagram.png</text></svg>`;
  arr[3].blobUrl = 'data:image/svg+xml;utf8,' + encodeURIComponent(svg);
  save(); // persist
  return arr;
}

/* initialize local storage on first run */
if(!load()) { files = sampleFiles(); } // sampleFiles already saved
else files = load();

/* initial UI states */
renderQuickList();
selectFile(selectedId);

</script>
</body>
</html>
