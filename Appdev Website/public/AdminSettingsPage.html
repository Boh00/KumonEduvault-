<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Instructor Settings — Demo</title>
  <style>
    :root{
      --bg:#f3f6fb;
      --card:#ffffff;
      --muted:#6b7280;
      --primary:#3b82f6;
      --accent:#7c3aed;
      --success:#10b981;
      --danger:#ef4444;
      --glass: rgba(255,255,255,0.6);
      --radius:12px;
      --shadow: 0 6px 20px rgba(16,24,40,0.08);
    }

    [data-theme="dark"]{
      --bg:#0b1220;
      --card:#0f1724;
      --muted:#9aa4b2;
      --primary:#60a5fa;
      --accent:#c4b5fd;
      --glass: rgba(255,255,255,0.03);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:linear-gradient(180deg,var(--bg),#e9f0ff 120%);
      min-height:100vh;
      color: #0f1724;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:32px;
    }

    header{
      display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;
    }
    header h1{margin:0;font-size:1.25rem}
    header p{margin:0;color:var(--muted);font-size:0.95rem}

    .container{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:360px 1fr;gap:24px}

    .card{
      background:var(--card);
      border-radius:var(--radius);
      padding:20px;
      box-shadow:var(--shadow);
      backdrop-filter: blur(6px);
    }

    /* Left column: profile */
    .profile-card{display:flex;flex-direction:column;gap:14px}
    .avatar-wrap{display:flex;gap:14px;align-items:center}
    .avatar{
      width:86px;height:86px;border-radius:14px;overflow:hidden;flex-shrink:0;background:linear-gradient(135deg,var(--primary),var(--accent));display:grid;place-items:center;color:white;font-weight:600;font-size:28px;
    }
    .file-input{display:none}
    .btn{display:inline-block;padding:8px 12px;border-radius:10px;border:0;background:var(--primary);color:white;font-weight:600;cursor:pointer}
    .btn.secondary{background:transparent;color:var(--primary);border:1px solid rgba(59,130,246,0.12)}

    .meta{color:var(--muted);font-size:0.95rem}

    /* Right column: settings form */
    form{display:flex;flex-direction:column;gap:18px}
    .section-title{display:flex;align-items:center;justify-content:space-between}
    .section-title h2{margin:0;font-size:1rem}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}

    label{display:block;font-size:0.9rem;margin-bottom:6px}
    input[type="text"],input[type="email"],input[type="password"],select,textarea{
      width:100%;padding:10px;border-radius:10px;border:1px solid rgba(15,23,36,0.06);background:linear-gradient(180deg,var(--glass),transparent);font-size:0.95rem
    }
    textarea{min-height:90px}

    .row{display:flex;gap:12px}
    .switch{position:relative;width:46px;height:26px;background:#e6e9ee;border-radius:999px;cursor:pointer}
    .switch input{display:none}
    .knob{position:absolute;top:3px;left:3px;width:20px;height:20px;border-radius:50%;background:white;box-shadow:0 2px 6px rgba(2,6,23,0.12);transition:transform .18s ease, left .18s ease}
    .switch.on{background:linear-gradient(90deg,var(--primary),var(--accent))}
    .switch.on .knob{transform:translateX(20px)}

    .helper{font-size:0.85rem;color:var(--muted)}

    .actions{display:flex;gap:10px;justify-content:flex-end;margin-top:6px}

    .small{font-size:0.85rem;padding:6px 10px}

    .toast{position:fixed;right:20px;bottom:20px;background:var(--card);border-radius:10px;padding:12px 14px;box-shadow:0 8px 24px rgba(2,6,23,0.2);display:none;align-items:center;gap:10px}
    .toast.show{display:flex}

    /* responsive */
    @media (max-width:900px){
      .container{grid-template-columns:1fr;}
      .grid{grid-template-columns:1fr}
    }

    /* subtle form focus */
    input:focus,textarea:focus,select:focus{outline:none;box-shadow:0 0 0 4px rgba(59,130,246,0.06);border-color:rgba(59,130,246,0.28)}

    .danger{color:var(--danger)}

  </style>
</head>
<body>
  <header>
    <div>
      <h1>Admin Settings</h1>
      <p>Update your profile, security, and preferences.</p>
    </div>
    <div>
      <button id="toggleThemeBtn" class="btn secondary small">Toggle theme</button>
    </div>
  </header>

  <main class="container">
    <!-- Left column: profile quick card -->
    <aside class="card profile-card" aria-label="Profile card">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <strong id="displayName">Name</strong>
          <div class="meta" id="displayEmail">Admin@example.com</div>
        </div>
        <div class="meta">ID: <strong id="studentId">#S12345</strong></div>
      </div>

      <div class="avatar-wrap" style="margin-top:6px">
        <div id="avatarPreview" class="avatar" aria-hidden="true">SN</div>
        <div style="flex:1">
          <div class="helper">Profile Picture</div>
          <div style="margin-top:8px;display:flex;gap:8px">
            <label class="btn small" for="profilePicInput">Upload</label>
            <input id="profilePicInput" class="file-input" type="file" accept="image/*">
            <button id="removePic" class="btn secondary small">Remove</button>
          </div>
          <div class="helper" style="margin-top:8px">Accepted: JPG, PNG. Max 2MB.</div>
        </div>
      </div>

      <hr style="border:none;border-top:1px solid rgba(15,23,36,0.04);margin:12px 0">

      <div>
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div class="helper">Connected Apps</div>
            <div style="margin-top:6px">Google Classroom • Zoom</div>
          </div>
          <button id="manageApps" class="btn small">Manage</button>
        </div>
      </div>
    </aside>

    <!-- Right column: detailed settings -->
    <section class="card" aria-label="Settings form">
      <form id="settingsForm" novalidate>

        <div class="section-title">
          <h2>Profile</h2>
          <div class="helper">Public information</div>
        </div>

        <div class="grid">
          <div>
            <label for="firstName">First name</label>
            <input id="firstName" type="text" placeholder="Enter first name">
          </div>
          <div>
            <label for="lastName">Last name</label>
            <input id="lastName" type="text" placeholder="Enter last name">
          </div>
          <div>
            <label for="email">Email</label>
            <input id="email" type="email" placeholder="you@school.edu">
          </div>
          <div>
            <label for="username">Username</label>
            <input id="username" type="text" placeholder="student123">
          </div>
        </div>

        <div>
          <label for="about">About (optional)</label>
          <textarea id="about" placeholder="A short bio, year, major, interests..."></textarea>
        </div>

        <div class="section-title">
          <h2>Security</h2>
          <div class="helper">Password & account security</div>
        </div>

        <div class="grid">
          <div>
            <label for="currentPassword">Current password</label>
            <input id="currentPassword" type="password" placeholder="••••••••">
          </div>
          <div></div>
          <div>
            <label for="newPassword">New password</label>
            <input id="newPassword" type="password" placeholder="At least 8 characters">
            <div id="pwdStrength" class="helper">Password strength: <span id="pwdState">—</span></div>
          </div>
          <div>
            <label for="confirmPassword">Confirm new password</label>
            <input id="confirmPassword" type="password" placeholder="Repeat new password">
          </div>
        </div>

        <div class="section-title">
          <h2>Preferences</h2>
          <div class="helper">Customize your app experience</div>
        </div>

        <div style="display:grid;gap:10px">
          <div style="display:flex;align-items:center;justify-content:space-between">
            <div>
              <div style="font-weight:600">Email notifications</div>
              <div class="helper">Receive important updates and class announcements</div>
            </div>
            <label class="switch" id="notifSwitch" tabindex="0" role="switch" aria-checked="true">
              <input type="checkbox" checked>
              <div class="knob"></div>
            </label>
          </div>

          <div style="display:flex;align-items:center;justify-content:space-between">
            <div>
              <div style="font-weight:600">Show profile publicly</div>
              <div class="helper">Allow this to view your profile</div>
            </div>
            <label class="switch" id="publicSwitch" tabindex="0" role="switch" aria-checked="true">
              <input type="checkbox" checked>
              <div class="knob"></div>
            </label>
          </div>

          <div style="display:flex;align-items:center;justify-content:space-between">
            <div>
              <div style="font-weight:600">Preferred theme</div>
              <div class="helper">Light or Dark mode</div>
            </div>
            <select id="themeSelect" aria-label="Theme select">
              <option value="system">Follow system</option>
              <option value="light">Light</option>
              <option value="dark">Dark</option>
            </select>
          </div>
        </div>

        <div class="section-title" style="margin-top:6px">
          <h2>Privacy</h2>
          <div class="helper">Data & permissions</div>
        </div>

        <div style="display:flex;align-items:center;justify-content:space-between">
          <div>
            <div style="font-weight:600">Location sharing</div>
            <div class="helper">Used for campus-only features</div>
          </div>
          <label class="switch" id="locSwitch" tabindex="0" role="switch" aria-checked="false">
            <input type="checkbox">
            <div class="knob"></div>
          </label>
        </div>

        <div class="actions">
          <button type="button" id="cancelBtn" class="btn secondary">Cancel</button>
          <button type="submit" id="saveBtn" class="btn">Save changes</button>
        </div>

      </form>
    </section>
  </main>

  <div id="toast" class="toast" role="status" aria-live="polite">
    <div id="toastMsg">Saved</div>
  </div>

  <script>
    // Lightweight JS to make the page functional: preview avatar, toggle switches, save/load to localStorage
    (function(){
      const q = sel => document.querySelector(sel);
      const settingsForm = q('#settingsForm');
      const avatarPreview = q('#avatarPreview');
      const profilePicInput = q('#profilePicInput');
      const removePic = q('#removePic');
      const displayName = q('#displayName');
      const displayEmail = q('#displayEmail');
      const studentIdEl = q('#studentId');
      const toast = q('#toast');
      const toastMsg = q('#toastMsg');
      const toggleThemeBtn = q('#toggleThemeBtn');
      const themeSelect = q('#themeSelect');

      // switches (custom) wiring
      function makeSwitch(swEl){
        const checkbox = swEl.querySelector('input');
        const update = ()=>{
          if(checkbox.checked){ swEl.classList.add('on'); swEl.setAttribute('aria-checked','true'); }
          else{ swEl.classList.remove('on'); swEl.setAttribute('aria-checked','false'); }
        }
        swEl.addEventListener('click', ()=>{ checkbox.checked = !checkbox.checked; update(); });
        swEl.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); checkbox.checked = !checkbox.checked; update(); } });
        update();
      }
      makeSwitch(q('#notifSwitch'));
      makeSwitch(q('#publicSwitch'));
      makeSwitch(q('#locSwitch'));

      // small helper: show toast
      function showToast(msg, time=2000){ toastMsg.textContent = msg; toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'), time); }

      // load settings from localStorage
      const STORAGE_KEY = 'student_settings_demo_v1';
      const defaultSettings = {
        firstName:'', lastName:'', email:'student@example.com', username:'', about:'', studentId:'#S12345', avatar:null,
        notif:true, publicProfile:true, location:false, theme:'system'
      };
      function loadSettings(){
        let saved = null;
        try{ saved = JSON.parse(localStorage.getItem(STORAGE_KEY)); }catch(e){ saved = null; }
        const s = Object.assign({}, defaultSettings, saved || {});
        q('#firstName').value = s.firstName;
        q('#lastName').value = s.lastName;
        q('#email').value = s.email;
        q('#username').value = s.username;
        q('#about').value = s.about;
        studentIdEl.textContent = s.studentId || defaultSettings.studentId;
        q('#notifSwitch input').checked = !!s.notif; q('#publicSwitch input').checked = !!s.publicProfile; q('#locSwitch input').checked = !!s.location;
        // update switch visuals
        [q('#notifSwitch'), q('#publicSwitch'), q('#locSwitch')].forEach(sw=>{ const cb = sw.querySelector('input'); if(cb.checked) sw.classList.add('on'); else sw.classList.remove('on'); sw.setAttribute('aria-checked', cb.checked?'true':'false'); });
        themeSelect.value = s.theme || 'system'; applyTheme(s.theme);
        // avatar
        if(s.avatar){ setAvatarFromDataUrl(s.avatar); } else { setAvatarInitials(); }
        updateSummary();
      }

      function updateSummary(){
        const fn = q('#firstName').value.trim();
        const ln = q('#lastName').value.trim();
        displayName.textContent = fn || ln ? (fn + (ln?(' ' + ln):'')) : 'Student Name';
        displayEmail.textContent = q('#email').value || defaultSettings.email;
      }

      function setAvatarFromDataUrl(dataUrl){ avatarPreview.style.background = `url(${dataUrl}) center/cover no-repeat`; avatarPreview.textContent=''; avatarPreview.setAttribute('aria-hidden','false'); }
      function setAvatarInitials(){ avatarPreview.style.background = `linear-gradient(135deg,var(--primary),var(--accent))`; const fn = q('#firstName').value.trim(), ln = q('#lastName').value.trim(); const initials = ((fn[0]||'') + (ln[0]||'')).toUpperCase() || 'SN'; avatarPreview.textContent = initials; }

      profilePicInput.addEventListener('change', async (e)=>{
        const file = e.target.files && e.target.files[0];
        if(!file) return;
        if(file.size > 2 * 1024 * 1024){ alert('File too large. Max 2MB.'); return; }
        const reader = new FileReader();
        reader.onload = ()=>{
          const dataUrl = reader.result;
          setAvatarFromDataUrl(dataUrl);
          savePartial({avatar:dataUrl});
          showToast('Profile picture updated');
        };
        reader.readAsDataURL(file);
      });

      removePic.addEventListener('click', ()=>{ localStorage.setItem(STORAGE_KEY, JSON.stringify(Object.assign({}, JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}'), {avatar:null}))); setAvatarInitials(); showToast('Profile picture removed'); });

      // theme logic
      function applyTheme(pref){
        const root = document.documentElement;
        if(pref === 'dark') root.setAttribute('data-theme','dark');
        else if(pref === 'light') root.removeAttribute('data-theme');
        else { // system
          const dark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
          if(dark) root.setAttribute('data-theme','dark'); else root.removeAttribute('data-theme');
        }
      }

      toggleThemeBtn.addEventListener('click', ()=>{
        const cur = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
        const next = cur === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', next === 'dark' ? 'dark' : '');
        showToast('Theme toggled');
      });

      themeSelect.addEventListener('change', (e)=>{ applyTheme(e.target.value); savePartial({theme:e.target.value}); });

      // password strength quick check
      function pwdStrength(pwd){
        if(!pwd) return '—';
        let score = 0;
        if(pwd.length >= 8) score++;
        if(/[A-Z]/.test(pwd)) score++;
        if(/[0-9]/.test(pwd)) score++;
        if(/[^A-Za-z0-9]/.test(pwd)) score++;
        if(score <= 1) return 'Weak';
        if(score === 2) return 'Fair';
        if(score === 3) return 'Good';
        return 'Strong';
      }
      q('#newPassword').addEventListener('input', (e)=>{ q('#pwdState').textContent = pwdStrength(e.target.value); });

      // save partial updates to localStorage
      function savePartial(obj){ const cur = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}'); const merged = Object.assign({}, cur, obj); localStorage.setItem(STORAGE_KEY, JSON.stringify(merged)); }

      settingsForm.addEventListener('submit', (e)=>{
        e.preventDefault();
        // validate password if present
        const newPwd = q('#newPassword').value;
        const confirm = q('#confirmPassword').value;
        if(newPwd || confirm){ if(newPwd.length < 8){ alert('New password must be at least 8 characters'); return; } if(newPwd !== confirm){ alert('New password and confirmation do not match'); return; } }

        const payload = {
          firstName: q('#firstName').value.trim(),
          lastName: q('#lastName').value.trim(),
          email: q('#email').value.trim(),
          username: q('#username').value.trim(),
          about: q('#about').value.trim(),
          studentId: studentIdEl.textContent,
          notif: q('#notifSwitch input').checked,
          publicProfile: q('#publicSwitch input').checked,
          location: q('#locSwitch input').checked,
          theme: themeSelect.value || 'system'
        };
        // attach avatar if exists in storage
        const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
        if(saved.avatar) payload.avatar = saved.avatar;
        localStorage.setItem(STORAGE_KEY, JSON.stringify(payload));
        showToast('Settings saved');
      });

      q('#cancelBtn').addEventListener('click', (e)=>{ loadSettings(); showToast('Changes reverted'); });

      // keep preview updated when editing name/email
      ['#firstName','#lastName','#email'].forEach(sel=> q(sel).addEventListener('input', updateSummary));

      // initialize
      loadSettings();

      // helper: set initials if no avatar on first load
      function initStudentDefaults(){
        if(!localStorage.getItem(STORAGE_KEY)){
          localStorage.setItem(STORAGE_KEY, JSON.stringify(defaultSettings));
        }
      }
      initStudentDefaults();

      // expose small helpers for demo console use
      window._STUDENT_SETTINGS = {
        load: loadSettings,
        savePartial: savePartial,
        STORAGE_KEY
      };

    })();
  </script>
</body>
</html>
